<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Md Asraful Hasan Apu</title>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        .erc-web-btn, .erc-github-btn {
          box-shadow: 0 2px 8px rgba(0,123,255,0.12);
          transition: box-shadow 0.2s, transform 0.2s;
          will-change: transform;
        }
        .erc-web-btn:hover, .erc-github-btn:hover {
          box-shadow: 0 8px 24px rgba(0,123,255,0.18);
          transform: translateY(-3px) scale(1.06);
          background: #0056b3;
        }
        .erc-github-btn {
          background: #24292e;
        }
        .erc-github-btn:hover {
          background: #444c56;
        }
    </style>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0DV1B94JNQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0DV1B94JNQ');
</script>
</head>
<body>

    <!-- Left Navigation Pane -->
    <div class="nav-pane">
        <img src="Images/nav_profile.jpg" alt="My Photo">
        <h2>Md Asraful Hasan Apu</h2>
        <p>Robotics Engineer | Automation Expert | AI Enthusiast</p>
        <ul>
            <!-- Main Sections (EDUCATION LINK REMOVED) -->
            <li><a href="#about">About Me</a></li>
            <li><a href="#experience">Experience</a></li>
            <li>
                <a href="#projects">Projects</a>
                <ul class="nested-links">
                    <!-- Project Sub-Sections -->
                    <li><a href="#robotics-projects">Robotics</a></li>
                    <li><a href="#industrial-automation">Industrial Automation</a></li>
                    <li><a href="#python-programs">Python Program</a></li>
                    <li><a href="#mechanical-design">Mechanical Design</a></li>
                    <li><a href="#others">Others</a></li>
                </ul>
            </li>
            <li><a href="#achievements">Achievements</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
        
        <!-- START: NEW SOCIAL MEDIA LINKS CONTAINER -->
        <div class="social-links-container">
            <!-- IMPORTANT: Replace the '#' with your actual URLs -->
            <a href="https://github.com/asrafulapu1996" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
            <a href="https://www.linkedin.com/in/asrafulapu" target="_blank" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
            <a href="mailto:asrafulhasan1996@gmail.com" title="Email"><i class="fas fa-envelope"></i></a>
            <a href="https://www.youtube.com/@md.asrafulhasanapu8587" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a>
        </div>
        <!-- END: NEW SOCIAL MEDIA LINKS CONTAINER -->
        <!-- Copyright Section -->
        <div class="nav-copyright">
            <i class="fa-regular fa-copyright" ></i> Md Asraful Hasan Apu    
        </div>
        <!-- END Copyright Section -->
        
    </div>

    <!-- Right Scrollable Content -->
    <div class="content">

        <!-- About Me Section (Now contains Education) -->
        <section id="about">
            <h1>About Me</h1>
            
            <div class="about-intro">
                <div class="about-image">
                    <!-- Placeholder image -->
                    <img src="Images/About_me_pic.jpeg" alt="Your Image">

                </div>
                <div class="about-description">
                    <p>I am <strong> Asraful Hasan Apu</strong>, a Senior Robotics and Automation Engineer with extensive experience in industrial automation, 
                    robotics, and smart manufacturing. Currently, I serve at Crystal International Group Limited, a leading multinational apparel 
                    manufacturer, and previously contributed as a Senior R&D Engineer at Energypac Engineering Limited, Bangladesh’s largest electrical 
                    and electronics solutions provider.</p>
                    <p style="margin-top: 10px;">With a Bachelor’s degree in <strong>Mechanical Engineering from BUET</strong>, I have developed a strong foundation in 
                    mechanical design, control systems, and industrial automation. Over the years, I have designed, implemented, and optimized complex 
                    systems—from <strong>AGV/AMR</strong> deployments in large-scale factories to <strong>SCADA and BMS</strong> installations for 
                    critical infrastructure.</p>
                    <p style="margin-top: 10px;">I am passionate about leveraging <strong>advanced robotics, AI, and smart manufacturing technologies</strong> to improve efficiency, 
                    reduce costs, and drive innovation. My mission is to bridge the gap between theoretical research and practical industrial applications, pushing 
                    the boundaries of what modern automation and robotics can achieve.</p>
                </div>
            </div>

            <!-- COMBINED SKILLS & SPECIALIZATION SECTION -->
            <section id="skills-specialization">
                <!-- UPDATED HEADING: Removed Icon and changed text to "Specialization" -->
                <h2>Specialization</h2>

                <!-- Specialization Content (Bulleted List) -->
                <div class="specialization-container">
                    <ul class="specialization-list">
                        <li>2+ years of experience in Industrial Robotics and Smart Manufacturing System Development.</li>
                        <li>3+ years of experience in Industrial Automation and Control System Development.</li>
                        <li>Skilled in 3D modeling, Mechanical Design, FEA and CFD Analysis.</li>
                        <li>Proficient in programming for Robotics, Automation and AI applications.</li>
                        <li>Specialized in R&D of Complex Robotic Systems, Simulation, and Digital Twin Technology.</li>
                    </ul>
                </div>

                <!-- Core Skills Content (Grid) -->
                <div class="core-skills-container">
                    <h3>Skills</h3>
                    
                    <!-- START OF SINGLE SKILL CARD -->
                    <div class="single-skill-card">
                        
                        <!-- Programming Skill Group -->
                        <div class="skill-group">
                            <h4><i class="fa-solid fa-code"></i> Programming</h4>
                            <p class="skill-list-text">Python, C, C++, MATLAB, PLC Ladder Logic, PLC SCL, Autodesk Inventor VBA</p>
                        </div>

                        <!-- Mechanical Design & Simulation Skill Group -->
                        <div class="skill-group">
                            <h4><i class="fa-solid fa-gear"></i> Mechanical Design & Simulation</h4>
                            <p class="skill-list-text">ANSYS (FEA), SolidWorks, Autodesk Inventor, AutoCAD, Inkscape</p>
                        </div>

                        <!-- Automation Skill Group -->
                        <div class="skill-group">
                            <h4><i class="fa-solid fa-industry"></i> Automation</h4>
                            <p class="skill-list-text">Siemens TIA Portal, Rockwell Studio 5000, Phoenix-Contact PLCnext, Automation Studio, Factory IO</p>
                        </div>

                        <!-- Robotics Skill Group -->
                        <div class="skill-group">
                            <h4><i class="fa-solid fa-robot"></i> Robotics</h4>
                            <p class="skill-list-text">AGV/AMR, ROS (Robot Operating System), Gazebo, MATLAB for Kinematics, RoboDK (Simulation), Arduino, Raspberry Pi(Hardware) Pi</p>
                        </div>

                        <!-- Machine Learning & AI Skill Group -->
                        <div class="skill-group">
                            <h4><i class="fa-solid fa-brain"></i> Machine Learning & AI</h4>
                            <p class="skill-list-text">Python (Pandas, Numpy), Scikit-learn, OpenCV</p>
                        </div>

                        <!-- Data & Visualization Skill Group -->
                        <div class="skill-group">
                            <h4><i class="fa-solid fa-chart-line"></i> Data & Visualization</h4>
                            <p class="skill-list-text">MS SQL, Looker Studio (Reporting), Power BI (Business Intelligence)</p>
                        </div>
                    </div>
                    <!-- END OF SINGLE SKILL CARD -->
                </div>
            </section>
            
            <!-- EDUCATION SUB-SECTION (Moved inside #about and changed H1 to H2) -->
            <section id="education" style="margin-bottom: 0;"> 
                <h2 style="font-size: 1.7em; margin-top: 30px; text-align: center; border-bottom: none; padding-bottom: 0;">Education</h2>
                <div class="core-skills-container">
                    <div class="single-skill-card">
                        
                        <!-- Education Entry 1: BUET -->
                        <div class="skill-group education-entry">
                            <div class="education-desc">
                                <h4><i class="fa-solid fa-graduation-cap"></i> Bangladesh University of Engineering and Technology (BUET)</h4>
                                <p class="skill-list-text mb-2"><strong>B.Sc. in Mechanical Engineering</strong></p>
                                <p class="skill-list-text text-gray-500 italic">2014 – 2019</p>
                                <p class="skill-list-text mt-3">Relevant coursework: Mechatronics, Machine Design, Electro-Mechanical System Design, Instrumentation and Measurement.</p>
                            </div>
                            <div class="education-logo">
                                <img src="Images/Buet_logo.png" alt="BUET Logo">
                            </div>
                        </div>
                            

                        <!-- Education Entry 2: Secondary/HSC -->
                        <div class="skill-group education-entry">
                            <div class="education-desc">
                                <h4><i class="fa-solid fa-school"></i> Feni Government College(FGC)</h4>
                                <p class="skill-list-text mb-2"><strong>Science Group</strong></p>
                                <p class="skill-list-text text-gray-500 italic">2012 – 2014</p>
                                <p class="skill-list-text mt-3">Focused on Physics, Chemistry, and Mathematics (Engineering prerequisite subjects).</p>
                            </div>
                            <div class="education-logo">
                                <img src="Images/FGC_logo.png" alt="HSC Logo">
                            </div>
                        </div>
                    </div>
                </section>
            </section> <!-- END of #about section -->

        <!-- Experience Section (UPDATED to single combined card with two-column layout) -->
        <section id="experience">
            <h1>Experience</h1>
            
            <div class="experience-container">
                
                <!-- Single Combined Experience Card -->
                <div class="experience-card">
                    
                    <!-- Job Entry 1: Amigo Bangladesh Ltd. (Top Position) -->
                    <div class="job-entry">
                        
                        <!-- Left Column: Content -->
                        <div class="job-content">
                            <div class="company-header">
                                <h3>Senior Robotics & Automation Engineer</h3>
                            </div>
                            <p class="designation">
                                  <a href="https://www.crystalgroup.com/" target="_blank" rel="noopener">
                                    Crystal International Group Ltd.
                                  </a>
                            </p>
                            <p class="timeline">Sept 2023 – Present</p>
                            
                            <div class="roles">
                                <h4>Roles and Responsibilities</h4>
                                <ul>
                                    <li><strong>Autonomous Mobile Robot</strong> - Developed  and Integrated Autonomous Mobile Robot (AMR) based automated material handling and logistic systems for smart factory with advanced navigation and dynamic path planning for material handling in industrial settings.</li>
                                    <li><strong> Robotic System Integration</strong> - Integrated complex robotic systems such as robotic arms, elevators, and other third-party systems with AMRs to enable collaborative automation workflows.</li>
                                    <li><strong> Smart Manufacturing Systems</strong> - Engineered data integration between RCS and enterprise level system such as WMS/ MES, contributing to cyber-physical system research.</li>
                                    <li><strong>Industrial IoT and Automation</strong> - Developed PLC, HMI, and IoT-based control frameworks integrated with centralized robotic systems and real-time data visualization and monitoring system for improved production efficiency.</li>
                                </ul>
                            </div>
                        </div>
                        
                        <!-- Right Column: Media (Logo + Video) -->
                        <div class="job-media">
                            <!-- Placeholder Logo ABOVE Video -->
                            <img src="Images/crystal_logo.png" alt="Amigo Logo" class="company-logo">

                            <!-- Video for Amigo (Using FLAP project video) -->
                            <div class="project-video">
                                <iframe 
                                    id="amigo-exp-video"
                                    data-videoid="OXd82BIxXEg"
                                    src="https://www.youtube.com/embed/OXd82BIxXEg?enablejsapi=1&autoplay=0&mute=1&loop=1&playlist=OXd82BIxXEg&rel=0&modestbranding=1&controls=1"
                                    frameborder="0"
                                    allow="autoplay; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen>
                                </iframe>
                                <span class="video-view-button">view large</span>
                            </div>
                        </div>
                    </div> <!-- End of Job Entry 1: Amigo -->

                    <!-- Job Entry 2: Energypac Engineering Ltd. (Bottom Position) -->
                    <div class="job-entry">
                        
                        <!-- Left Column: Content -->
                        <div class="job-content">
                            <div class="company-header">
                                <h3>Senior Research & Development Engineer</h3>
                            </div>
                            <p class="designation">
                                <a href="https://www.energypac.com.bd" target="_blank" rel="noopener">
                                    Energypac Engineering Ltd.
                                </a>
                            </p>
                            <p class="timeline">May 2019 – Aug 2023</p>
                            
                            <div class="roles">
                                <h4>Roles and Responsibilities</h4>
                                <ul>
                                    <li><strong>Industrial Automation Systems</strong>- Developed control systems and automation algorithm for Smart Building (BMS) and Substation Automation (SAS) Systems.</li>
                                    <li><strong>Industrial Control Systems</strong>- Programmed and configured PLCs and HMIs (Siemens, Allen Bradley, Phoenix Contact) to control mission-critical industrial systems.</li>
                                    <li><strong>Robotics and Mechatronics</strong>- Programmed and Integrated CLOOS 6DOF robotic arm for precision welding of industrial electric control panel.-Developed control and automation systems for high-precision industrial machine involving electromechanical integration.</li>
                                    <li><strong>3D Modeling, Simulation and Prototyping</strong>- Designed and simulated industrial components using SolidWorks, Autodesk Inventor, and ANSYS.- Fabricated functional prototypes through 3D printing using the Zortrax M300 Plus to validate design and fit.</li>
                                </ul>
                            </div>
                        </div>
                        
                        <!-- Right Column: Media (Logo + Video) -->
                        <div class="job-media">
                            <!-- Placeholder Logo ABOVE Video -->
                            <img src="Images/energypac_logo.png" alt="Energypac Logo" class="company-logo">
                            
                            <!-- Video for Energypac (Using a mock industrial automation video) -->
                            <div class="project-video">
                                <iframe 
                                    id="energypac-exp-video"
                                    data-videoid="yAILJ-CfOKY"
                                    src="https://www.youtube.com/embed/yAILJ-CfOKY?enablejsapi=1&autoplay=0&mute=1&loop=1&playlist=yAILJ-CfOKY&rel=0&modestbranding=1&controls=1"
                                    frameborder="0"
                                    allow="autoplay; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen>
                                </iframe>
                                <span class="video-view-button">view large</span>
                            </div>
                        </div>
                    </div> <!-- End of Job Entry 2: Energypac -->

                </div> <!-- End of Single Combined Experience Card -->

            </div>
        </section>

        <!-- Projects Section (Parent Section - used for highlighting the main category) -->
        <section id="projects">
            <h1>Projects</h1>

            <section id="robotics-projects">
                <h2>Robotics</h2>
                                <div class="projects-container">
                                        <div class="project">
                                                <div class="project-row">
                                                    <div class="project-content">
                                                        <h2>FLAP – Autonomous Mobile Robot Driven Cyber-Physical Smart Manufacturing System in RMG Industry</h2>
                                                        <h3>Senior Robotics & Automation Engineer | Crystal International Group</h3>
                                                        <p class="project-desc">
                                                            FLAP is an Industry 4.0 initiative that revolutionize garment 
                                                            manufacturing with advanced robotics and automation. Implemented 
                                                            with AGVs/AMRs, robotic arms, and integrated MES/RCS systems, the 
                                                            project improved material flow, reduced manual labor, and increased
                                                            efficiency by 40%. It also fosters human-robot collaboration and leverages
                                                            cyber-physical systems for smarter, data-driven operations. As Senior Robotics 
                                                            and Automation Engineer, I lead the development and implementation of all robotic 
                                                            and automation systems in this project.
                                                        </p>
                                                        <div class="project-details">
                                                            <div class="highlights">
                                                                <h4>Project Highlights</h4>
                                                                <ul>
                                                                    <li>Advanced AGV and AMR robots for seamless material handling.</li>
                                                                    <li>Complete MES–RCS integration for end-to-end digital operations.</li>
                                                                    <li>Intelligent automation with robotic arms, elevators, and PLC systems.</li>
                                                                    <li>Human-robot collaboration through intelligent cyber-physical systems.</li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                         <!-- Web and GitHub Buttons for ERC Project -->
                                                        <div style="display:flex;gap:16px;margin-top:10px;">
                                                            <!-- <a href="https://buetinterplanetar.com/" target="_blank" rel="noopener" class="erc-web-btn" 
                                                            style=
                                                                "display:inline-flex;
                                                                align-items:center;
                                                                gap:8px;
                                                                padding:6px 10px;
                                                                background:#007BFF;
                                                                color:#fff;
                                                                border-radius:8px;
                                                                font-weight:400;
                                                                text-decoration:none;
                                                                font-size:.9em;">
                                                                <i class="fas fa-globe" style="font-size:.9em;"></i> Web
                                                            </a> -->
                                                            <a href="https://github.com/asrafulapu1996/flap_project" target="_blank" rel="noopener" class="erc-github-btn" 
                                                            style=
                                                                "display:inline-flex;
                                                                 align-items:center;
                                                                 gap:8px;
                                                                 padding:6px 10px;
                                                                 background:#007BFF;
                                                                 color:#fff;
                                                                 border-radius:8px;
                                                                 font-weight:400;
                                                                 text-decoration:none;font-size:.9em;">
                                                                <i class="fab fa-github" style="font-size:.9em;"></i> GitHub
                                                            </a>
                                                        </div>

                                                        
                                                        <div class="tags">
                                                            <span class="tag">AGV</span>
                                                            <span class="tag">Robotic Arm</span>
                                                            <span class="tag">MES</span>
                                                            <span class="tag">RCS</span>
                                                            <span class="tag">Cyber-Physical Systems</span>
                                                            <span class="tag">Human-Robot Interaction</span>
                                                            <span class="tag">Industry 4.0</span>
                                                        </div>
                                                    </div>
                                                    <div class="project-video-col">
                                                        <div class="project-video">
                                                            <iframe 
                                                                id="flap-project-video"
                                                                data-videoid="ZF73Y65SobM" 
                                                                src="https://www.youtube.com/embed/ZF73Y65SobM?enablejsapi=1&autoplay=0&mute=1&loop=1&playlist=ZF73Y65SobM&rel=0&modestbranding=1&controls=1"
                                                                frameborder="0"
                                                                allow="autoplay; encrypted-media; gyroscope; picture-in-picture"
                                                                allowfullscreen>
                                                            </iframe>
                                                            <span class="video-view-button">view large</span>
                                                        </div>
                                                    </div>
                                                </div>
                                        </div>
                                        <!-- END RE-ADDED FLAP VIDEO -->
                                        <div class="project">
                                                <div class="project-row">
                                                    <div class="project-content">
                                                        <h2>European Rover Challenge – ERC</h2>
                                                        <h3>Team Interplanetar | BUET</h3>
                                                        <p class="project-desc">
                                                                The European Rover Challenge (ERC) is a prestigious robotics competition organized 
                                                                by the European Space Foundation (ESF) and hosted at Kielce University of 
                                                                Technology in Poland. As a core team member and Science Team Leader, I performed design and build a 
                                                                fully functional Mars rover that performed autonomous navigation, 
                                                                terrain traversal, precision manipulation, and soil sample collection. 
                                                                Our rover ranked 2nd in Asia and 16th globally among 40 international 
                                                                teams.</p>
                                                        <div class="project-details">
                                                                <div class="highlights">
                                                                        <h4>Project Highlights</h4>
                                                                        <ul>
                                                                                <li>Precision manipulator control for maintenance and collection tasks.</li>
                                                                                <li>Autonomous navigation with 2D/3D mapping, computer vision & ROS.</li>
                                                                                <li>GPU-accelerated computing with NVIDIA Jetson Nano & deep learning.</li>
                                                                                <li>Custom-build electronics and robotic systems for full control.</li>
                                                                        </ul>
                                                                </div>
                                                        </div>
                                                        <!-- Web and GitHub Buttons for ERC Project -->
                                                        <div style="display:flex;gap:16px;margin-top:10px;">
                                                            <a href="https://buetinterplanetar.com/" target="_blank" rel="noopener" class="erc-web-btn" 
                                                            style=
                                                                "display:inline-flex;
                                                                align-items:center;
                                                                gap:8px;
                                                                padding:6px 10px;
                                                                background:#007BFF;
                                                                color:#fff;
                                                                border-radius:8px;
                                                                font-weight:400;
                                                                text-decoration:none;
                                                                font-size:.9em;">
                                                                <i class="fas fa-globe" style="font-size:.9em;"></i> Web
                                                            </a>
                                                            <!-- <a href="https://github.com/your-github-repo" target="_blank" rel="noopener" class="erc-github-btn" 
                                                            style=
                                                                "display:inline-flex;
                                                                 align-items:center;
                                                                 gap:8px;
                                                                 padding:6px 10px;
                                                                 background:#007BFF;
                                                                 color:#fff;
                                                                 border-radius:8px;
                                                                 font-weight:400;
                                                                 text-decoration:none;font-size:.9em;">
                                                                <i class="fab fa-github" style="font-size:.9em;"></i> GitHub
                                                            </a> -->
                                                        </div>
                                                        <div class="tags">
                                                                <span class="tag">Mars Rover</span>
                                                                <span class="tag">Manipulation</span>
                                                                <span class="tag">Autonomous Navigation</span>
                                                                <span class="tag">Computer Vision</span>    
                                                                <span class="tag">ROS</span>
                                                                <span class="tag">Nvidia Jetson</span>
                                                                <span class="tag">RP LIDAR</span>
                                                                <span class="tag">Machine Learning</span>
                                                        </div>
                                                    </div>
                                                    <div class="project-video-col">
                                                        <div class="project-video">
                                                            <iframe 
                                                                id="erc-video"
                                                                data-videoid="HYc1e6SWekA"
                                                                src="https://www.youtube.com/embed/HYc1e6SWekA?enablejsapi=1&autoplay=0&mute=1&loop=1&playlist=HYc1e6SWekA&rel=0&modestbranding=1&controls=1"
                                                                frameborder="0"
                                                                allow="autoplay; encrypted-media; gyroscope; picture-in-picture"
                                                                allowfullscreen>
                                                            </iframe>
                                                            <span class="video-view-button">view large</span>
                                                        </div>
                                                    </div>
                                                </div>
                                        </div>
                                </div>
            </section>
            
            <section id="industrial-automation">
                <h2>Industrial Automation Projects</h2>

                    <div class="projects-container">
                    <!-- Project 1: Radioator Fin forming Machine (Image Carousel) -->
                    <div class="project">
                        <div class="project-row">
                          <div class="project-content">
                            <h2>Automatic Transformer Radiator Fin Forming Machine</h2>
                            <h3>Energypac Engineering Ltd. | R&D Department</h3>
                            <p class="project-desc">
                                As an Automation and Control Engineer at Energypac Engineering Ltd., I developed the automation and control system for a transformer radiator fin manufacturing machine, integrating PLC programming, control design, and hydraulic analysis. The machine is now in full industrial production.
                            </p>
                            <div class="project-details">
                                <div class="highlights">
                                    <ul>
                                        <li>End-to-end design, implementation, and testing of automation system.</li>
                                        <li>Siemens PLC programming and TIA Portal-based control system.</li>
                                        <li>Mechanical structure collaboration for industrial-grade fin forming.</li>
                                        <li>Hydraulic system feasibility study with Automation Studio.</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="tags">
                                <span class="tag">Machine Automation</span>
                                <span class="tag">Control Systems</span>
                                <span class="tag">Siemens PLC</span>
                                <span class="tag">PLC Programming</span>
                                <span class="tag">Hydraulic Simulation</span>
                                <span class="tag">Automation Studio</span>
                            </div>
                          </div>
                          <div class="project-video-col">
                            <div class="image-carousel" id="carousel-1">
                                <div class="carousel-images">
                                    <div class="image-slide">
                                        <img src="Images/FM_1.png" alt="FM Image 1" data-title="Radiator Fin Forming Machine">
                                        <div class="image-title-overlay">Radiator Fin Forming Machine</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/FM_2.png" alt="FM  Image 2" data-title="Machine Control Equipments">
                                        <div class="image-title-overlay">Machine Control Equipments</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/FM_3.PNG" alt="FM  Image 3" data-title="PLC programming in Siemens TIA">
                                        <div class="image-title-overlay">PLC programming in Siemens TIA</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/FM_4.PNG" alt="FM  Image 4" data-title="HMI Design">
                                        <div class="image-title-overlay">HMI Design</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/FM_5.PNG" alt="FM  Image 5" data-title="Hydraulic Simulation in Automation Studio">
                                        <div class="image-title-overlay">Hydraulic Simulation in Automation Studio</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/FM_6.jpeg" alt="FM  Image 6" data-title="Final product">
                                        <div class="image-title-overlay">Final product</div>
                                    </div>
                                </div>
                                <button class="carousel-nav-btn prev">&lt;</button>
                                <button class="carousel-nav-btn next">&gt;</button>
                                <span class="carousel-view-button">view large</span>
                            </div>
                          </div>
                        </div>
                    </div>
                    
                    <!-- Project 2: Substation Automation (Image Carousel) -->
                    <div class="project">
                        <div class="project-row">
                          <div class="project-content">
                            <h2>Medium Voltage (33kV) Substation Automation</h2>
                            <h3>Energypac Engineering Ltd. | R&D Department</h3>
                            <p class="project-desc">
                                Designed and implemented a complete automation system for a 33kV substation, including control architecture, PLC/HMI programming, and equipment integration. The project was successfully commissioned, ensuring reliable, safe, and efficient operation.
                            </p>
                            <div class="project-details">
                                <div class="highlights">
                                    <!-- <h4>Project Highlights</h4> -->
                                    <ul>
                                        <li>Comprehensive automation and monitoring system design.</li>
                                        <li>Integration of all substation equipment with centralized control.</li>
                                        <li>End-to-end programming and testing for reliable operation.</li>
                                        <li>Ensured compliance with operational safety and efficiency standards.</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="tags">
                                <span class="tag">Smart Power Grid</span>
                                <span class="tag">SCADA </span>
                                <span class="tag">Electrical Protection</span>
                                <span class="tag">Phoenix Contact</span>
                                <span class="tag">Controller Programming</span>
                            </div>
                          </div>
                          <div class="project-video-col">
                            <div class="image-carousel" id="carousel-2">
                                <div class="carousel-images">
                                    <div class="image-slide">
                                        <img src="Images/SAS_1.jpg" alt="Smart Substation" data-title="Smart Substation">
                                        <div class="image-title-overlay">Smart Substation</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/SAS_2.png" alt="Phoenix Contact Controller Programming" data-title="Phoenix Contact Controller Programming">
                                        <div class="image-title-overlay">Phoenix Contact Controller Programming</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/SAS_3.png" alt="SCADA System Design in Visu+" data-title="SCADA System Design in Visu+">
                                        <div class="image-title-overlay">SCADA System Design in Visu+</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/SAS_4.png" alt="Grid Control Diagram" data-title="Grid Control Diagram">
                                        <div class="image-title-overlay">Grid Control Diagram</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/SAS_5.png" alt="Automation Control Panel" data-title="Automation Control Panel">
                                        <div class="image-title-overlay">Automation Control Panel</div>
                                    </div>
                                </div>
                                <button class="carousel-nav-btn prev">&lt;</button>
                                <button class="carousel-nav-btn next">&gt;</button>
                                <span class="carousel-view-button">view large</span>
                            </div>
                          </div>
                        </div>
                    </div>

                    <!-- Project 3: BUILDING MANAGEMENT SYSTEM (Image Carousel) -->
                    <div class="project">
                        <div class="project-row">
                          <div class="project-content">
                            <h2>Dhaka Metro Rail – Smart Building Management System (BMS)</h2>
                            <h3>Energypac Engineering Ltd. | In partnership with Rockwell Automation, USA</h3>
                            <p class="project-desc">
                                Developed and implemented the Smart Building Management System (BMS) for Dhaka Metro Rail’s depot facilities, integrating 5,000+ I/O points across 23 buildings for real-time monitoring and control. As Bangladesh’s largest BMS project, it involved automation architecture, PLC programming, HMI/SCADA development, and system integration.
                            </p>
                            <div class="project-details">
                                <div class="highlights">
                                    <ul>
                                        <li>Real-time data acquisition and visualization for 5,000+ I/O points.</li>
                                        <li>Seamless system integration across 23 buildings.</li>
                                        <li>End-to-end PLC, HMI, and SCADA programming and testing..</li>
                                        <li>Large-scale automation project executed in collaboration with international consultants.</li>
                                    </ul>
                                </div>
                            </div>
                            <div class="tags">
                                <span class="tag">Smart Building </span>
                                <span class="tag">Rockwell Automation</span>
                                <span class="tag">Real-time Monitoring & Control</span>
                                <span class="tag">Large-scale Automation</span>
                            </div>
                          </div>
                          <div class="project-video-col">
                            <div class="image-carousel" id="carousel-3">
                                <div class="carousel-images">
                                    <div class="image-slide">
                                        <img src="Images/BMS_1.jpg" alt="BMS 1" data-title="Smart Building Management System">
                                        <div class="image-title-overlay">Smart Building Management System</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/BMS_2.png" alt="BMS 2" data-title="Control System Architecture of Dhaka Metro BMS">
                                        <div class="image-title-overlay">Control System Architecture of Dhaka Metro BMS</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/BMS_3.png" alt="BMS 3" data-title="IO List of a Subsystem">
                                        <div class="image-title-overlay">IO List of a Subsystem</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/BMS_4.jpg" alt="BMS 4" data-title="Image of Control Panel">
                                        <div class="image-title-overlay">Image of Control Panel</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/BMS_5.jpg" alt="BMS 5" data-title="Myself During Commissioning Job">
                                        <div class="image-title-overlay">Myself During Commissioning Job</div>
                                    </div>
                                </div>
                                <button class="carousel-nav-btn prev">&lt;</button>
                                <button class="carousel-nav-btn next">&gt;</button>
                                <span class="carousel-view-button">view large</span>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="python-programs">
                <h2>Python Program</h2>
                <div class="projects-container">
                    <div class="project">
                        <div class="project-row">
                            <div class="project-content">
                                <h4>Switchgear BOM Creation Application</h4>
                                <p>During my tenure at Energypac Engineering Ltd., I developed an application to streamline and 
                                    consolidate the Bill of Materials (BOM) creation process for the R&D department. Previously, 
                                    BOMs for hundreds of switchgear equipment were manually prepared in Excel, which was both tedious 
                                    and inefficient. The application I built automated and simplified this process, resulting in a 40% 
                                    improvement in BOM creation efficiency. </p>

                                    <!--  GitHub button -->
                                    <div style="display:flex;gap:16px;margin-top:10px;">
                                        <a href="https://github.com/asrafulapu1996/epac_switchger_bom_soft/blob/main/E_Configure.py" target="_blank" rel="noopener" class="erc-github-btn" 
                                        style=
                                            "display:inline-flex;
                                                align-items:center;
                                                gap:8px;
                                                padding:6px 10px;
                                                background:#007BFF;
                                                color:#fff;
                                                border-radius:8px;
                                                font-weight:400;
                                                text-decoration:none;font-size:.9em;">
                                            <i class="fab fa-github" style="font-size:.9em;"></i> GitHub
                                        </a>
                                    </div>
                                    <div class="tags">
                                        <span class="tag">Python</span>
                                        <span class="tag">Pandas</span>
                                        <span class="tag">Scikit-learn</span>
                                        <span class="tag">Data Science</span>
                                    </div>
                            </div>
                            <div class="project-video-col">
                                <div class="project-video">
                                    <iframe 
                                        id="data-science-video"
                                        data-videoid="MNIuqA13BvQ"
                                        src="https://www.youtube.com/embed/MNIuqA13BvQ?enablejsapi=1&autoplay=0&mute=1&loop=1&playlist=MNIuqA13BvQ&rel=0&modestbranding=1&controls=1"
                                        frameborder="0"
                                        allow="autoplay; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                    <span class="video-view-button">view large</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="project">
                        <div class="project-row">
                          <div class="project-content">
                            <h4>Optimum Cable Duct Diameter Finder Application</h4>
                            <p>Determining the optimum cable duct diameter is simple for a few cables but becomes complex with many varying sizes, 
                                often leading to inefficiencies in industrial design. At Energypac R&D, I developed a Python program using a 
                                force-displacement algorithm to calculate the optimal duct diameter, adapting and refining existing resources to 
                                solve this long-standing challenge.</p>
                            <!--  GitHub button -->
                            <div style="display:flex;gap:16px;margin-top:10px;">
                                <a href="https://github.com/asrafulapu1996/finding_optimum_cable_duct_size/blob/main/Circle.py" target="_blank" rel="noopener" class="erc-github-btn" 
                                style=
                                    "display:inline-flex;
                                        align-items:center;
                                        gap:8px;
                                        padding:6px 10px;
                                        background:#007BFF;
                                        color:#fff;
                                        border-radius:8px;
                                        font-weight:400;
                                        text-decoration:none;font-size:.9em;">
                                    <i class="fab fa-github" style="font-size:.9em;"></i> GitHub
                                </a>
                            </div>
                            <div class="tags">
                                <span class="tag">Python</span>
                                <span class="tag">Numpy</span>
                                <span class="tag">Matplotlib</span>
                                <span class="tag">Physics-Based-Simulation</span>
                            </div>
                        </div>
                          <div class="project-video-col">
                            <div class="project-video">
                                <iframe 
                                    id="ml-video"
                                    data-videoid="R0N3pz8sK6k"
                                    src="https://www.youtube.com/embed/R0N3pz8sK6k?enablejsapi=1&autoplay=0&mute=1&loop=1&playlist=R0N3pz8sK6k&rel=0&modestbranding=1&controls=1"
                                    frameborder="0"
                                    allow="autoplay; encrypted-media; gyroscope; picture-in-picture"
                                    allowfullscreen>
                                </iframe>
                                <span class="video-view-button">view large</span>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Mechanical Design Section -->
            <section id="mechanical-design">
                <h2>Mechanical Design & Analysis</h2>
                <div class="projects-container">
                    
                    <!-- design section -->
                    <div class="project">
                        <div class="project-row">
                            <div class="project-content">
                                <h4>Mechanical Design</h4>
                                <p>At the beginning of my employment at Energypac Engineering Ltd., my primary 
                                responsibilities involved developing 3D models and conducting mechanical analyses 
                                for a range of industrial products. I utilized tools such as SolidWorks, 
                                Autodesk Inventor and AutoCAD for detailed 3D modeling and drafting. I also performed 3D printing
                                for rapid prototyping and validation of designs.</p>

                                <div class="tags">
                                    <span class="tag">Autodesk Inventor</span>
                                    <span class="tag">Solidworks</span>
                                    <span class="tag">3D-Modeling</span>
                                    <span class="tag">3D-Printing</span>
                                </div>

                            </div>

                            <div class="project-video-col" style="flex: 0 0 50%; max-width: 50%;">
                                <div class="image-carousel" id="carousel-4">
                                    <div class="carousel-images">
                                        <div class="image-slide">
                                            <img src="Images/design_1.PNG" alt="Design 1" data-title="Electric Distribution Box Design">
                                            <div class="image-title-overlay">Electric Distribution Box Design</div>
                                        </div>
                                        <div class="image-slide">
                                            <img src="Images/design_2.PNG" alt="Design 2" data-title="Plastic Breaker Enclosure Design">
                                            <div class="image-title-overlay">Plastic Breaker Enclosure Design</div>
                                        </div>
                                        <div class="image-slide">
                                            <img src="Images/design_3.jpg" alt="Design 3" data-title="3D printing of the Prototype">
                                            <div class="image-title-overlay">3D printing of the Prototype</div>
                                        </div> 
                                        <div class="image-slide">
                                            <img src="Images/design_4.PNG" alt="Design 4" data-title="Lighting Busduct Component Design">
                                            <div class="image-title-overlay">Lighting Busduct Component Design</div>
                                        </div>
                                        <div class="image-slide">
                                            <img src="Images/design_5.jpg" alt="Design 5" alt="Gripper Testing 5" data-title="Final Product after production">
                                            <div class="image-title-overlay">Final Product after production</div>
                                        </div>
                                        <div class="image-slide">
                                            <img src="Images/design_6.jpg" alt="Design 6" data-title="Electric Busduct System Design">
                                            <div class="image-title-overlay">Electric Busduct System Design</div>
                                        </div>
                                    </div>
                                    <button class="carousel-nav-btn prev">&lt;</button>
                                    <button class="carousel-nav-btn next">&gt;</button>
                                    <span class="carousel-view-button">view large</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Mechanical Project 2: Conveyor System -->
                    <div class="project">
                        <div class="project-row">
                          <div class="project-content">
                                <h4>Transformer Structural Design Analysis and Optimization</h4>
                                <p>Conducted Structural Analysis of Industrial Power Transformer. Reduced the 
                                    material cost by 6% and increased the overall strength and durability of the structure.</p>

                                <div class="tags">
                                        <span class="tag">FEA</span>
                                        <span class="tag">Stress-Strain</span>
                                        <span class="tag">Design-Optimization</span>
                                        <span class="tag">Simulation</span>
                                </div>
                          </div>
                          <div class="project-video-col"style="flex: 0 0 50%; max-width: 50%;">
                            <div class="image-carousel" id="carousel-5">
                                <div class="carousel-images">
                                    <div class="image-slide">
                                        <img src="Images/analysis_1.jpg" alt="Analysis-1" data-title="Previous Design with Plate Stiffener">
                                        <div class="image-title-overlay">Previous Design with Plate Stiffener</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/analysis_2.jpg" alt="Analysis-2" data-title="Modified Design with C Stiffener">
                                        <div class="image-title-overlay">Modified Design with C Stiffener</div>
                                    </div>
                                </div>
                                <button class="carousel-nav-btn prev">&lt;</button>
                                <button class="carousel-nav-btn next">&gt;</button>
                                <span class="carousel-view-button">view large</span>
                            </div>
                          </div>
                        </div>
                    </div>           
                </div>
            </section>
            
            <!-- OTHERS SECTION -->
            <section id="others">
                <h2>Others</h2>
                <div class="projects-container">
                    
                    <!-- Other Project 1: Bionic Arm -->
                    <div class="project">
                        <div class="project-row">
                          <div class="project-content">
                            <h4>Gesture-Controlled Bionic Arm</h4>
                            <p>The objective of the project was to develop a bionic arm model which can mimic the human hand 
                                movement. It was a team project and initially it was designed as part of academic project 
                                course. Instead of using ready made flex sensor, we used our self-made version of flex 
                                sensor using potentiometer for the project. Later the project was showcased in Inter-University 
                                Project Showcase Competition -2017, arranged by BUET EEE department. The project was awarded
                                 1st-runner up position in that competition.</p>
                          </div>
                          <div class="project-video-col">
                            <div class="image-carousel" id="carousel-7">
                                <div class="carousel-images">
                                    <div class="image-slide">
                                        <img src="Images/bionic_1.png" alt="Bionic 1" data-title="Project Image">
                                        <div class="image-title-overlay">Project Image</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/bionic_2.jpg" alt="Bionic 2" data-title="Showcase in the Competition">
                                        <div class="image-title-overlay">Showcase in the Competition</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/bionic_4.png" alt="Bionic 3" data-title="Control Diagram">
                                        <div class="image-title-overlay">Control Diagram</div>
                                    </div>
                                </div>
                                <button class="carousel-nav-btn prev">&lt;</button>
                                <button class="carousel-nav-btn next">&gt;</button>
                                <span class="carousel-view-button">view large</span>
                            </div>
                          </div>
                        </div>
                    </div>

                    <!-- Other Project 2: Chem E Car -->
                    <div class="project">
                        <div class="project-row">
                          <div class="project-content">
                            <h4>National Chem-E-Car Competition</h4>
                            <p>National Chem-E-Car is a well renowned competition of graduate students where participant 
                                have to design a fully chemically powered vehicle model. The model also must have precise 
                                starting and stopping mechanism which also have to controlled by full chemical method. Along 
                                with my other teammate of Chemical Engineering Dept. My role was to design the mechanical 
                                structure, driving and start-stop mechanism of the vehicle model. </p>
                          </div>
                          <div class="project-video-col">
                            <div class="image-carousel" id="carousel-9">
                                <div class="carousel-images">
                                    <div class="image-slide">
                                        <img src="Images/chem_1.png" alt="Chem-1" data-title="Project Poster for Competition">
                                        <div class="image-title-overlay">Project Poster for Competition</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/chem_2.png" alt="Chem-2" data-title="Chem E Car Image">
                                        <div class="image-title-overlay">Chem E Car Image</div>
                                    </div>
                                    <div class="image-slide">
                                        <img src="Images/chem_3.jpg" alt="Chem-3" data-title="Team Photo">
                                        <div class="image-title-overlay">Team Photo</div>
                                    </div>
                                </div>
                                <button class="carousel-nav-btn prev">&lt;</button>
                                <button class="carousel-nav-btn next">&gt;</button>
                                <span class="carousel-view-button">view large</span>
                            </div>
                          </div>
                        </div>
                    </div>
                     <!-- Other Project 3: CNC Plotter -->
                    <div class="project">
                        <div class="project-row">
                          <div class="project-content">
                            <h4>Low-Cost CNC Plotting Machine</h4>
                            <p>The objective of this project was to design and develop a 2D CNC Plotter Machine capable of accurately 
                                sketching images, texts, and geometrical patterns on paper. The project was developed for Inter-University 
                                Project Showcase Competition-2017, that integrated both mechanical design and embedded control systems. 
                                The machine utilized stepper motors and belt-driven mechanisms for X-Y axis movement, controlled through an 
                                Arduino microcontroller and a motor driver circuit. A pen holder was mounted as the end-effector to draw precise 
                                outputs based on digital input commands. This low-cost prototype demonstrated the working principle of industrial 
                                CNC plotting machines.</p>
                          </div>
                          <div class="project-video-col">
                            <div class="image-carousel" id="carousel-8">
                                <div class="carousel-images">
                                    <div class="image-slide">
                                        <img src="Images/cnc_1.JPG" alt="CNC-1" data-title="Project Image">
                                        <div class="image-title-overlay">Project Image</div>
                                    </div>
                                </div>
                                <button class="carousel-nav-btn prev">&lt;</button>
                                <button class="carousel-nav-btn next">&gt;</button>
                                <span class="carousel-view-button">view large</span>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
            </section>
            
        </section>

        <!-- Achievements Section (UPDATED to use a single container card) -->
        <section id="achievements">
            <h1>Achievements</h1>
            <div class="achievements-container">
                <!-- START: Single Card to hold all achievements -->
                <div class="single-achievements-container">
                
                    <!-- Achievement 1: European Rover Challenge -->
                    <div class="achievement-item">
                        <div class="achievement-image">
                            <img src="Images/achv_1.jpg" alt="achievement-image-1">
                        </div>
                        <div class="achievement-details">
                            <h4>2nd in Asia and 16th globally in European Mars Rover Challenge (ERC) - 2019</h4>
                            <p>European Rover Challenge is one of the prestigious international robotics competition  organized by European Space Foundation (ESF) 40 teams form 11 countries were participated in that competition.</p>
                        </div>
                    </div>

                    <!-- Achievement 2: FLAP Project -->
                    <div class="achievement-item">
                        <div class="achievement-image">
                            <img src="Images/achv_2.jpg" alt="achievement-image-2">
                        </div>
                        <div class="achievement-details">
                            <h4>1st runner-up in Inter-University Project Showcase -2017, BUET </h4>
                            <p>Inter-University Project Showcase is a robotic project showcasing competitions arranged by BUET EEE department.</p>
                        </div>
                    </div>

                    
                
                </div>
                <!-- END: Single Card to hold all achievements -->

            </div>
        </section>

        <!-- Contact Section (UPDATED with Icons) -->
        <section id="contact">
            <h1>Contact</h1>
            <!-- Added mail icon -->
            <p><i class="fas fa-envelope"></i> Email: <a href="mailto:asrafulhasan1996@gmail.com">asrafulhasan1996@gmail.com</a></p>
            <!-- Added phone icon -->
            <p><i class="fas fa-phone"></i> Phone: +880 1521493505</p>
            <!-- Added LinkedIn icon -->
            <p><i class="fab fa-linkedin-in"></i> LinkedIn: <a href="#">https://www.linkedin.com/in/asrafulapu</a></p>
        </section>

    </div>

    <!-- The new full-screen video modal -->
    <div class="video-modal" id="video-modal">
        <div class="modal-content">
            <span class="modal-close" id="modal-close-btn">&times;</span>
            <iframe 
                id="modal-video-container"
                src=""
                frameborder="0"
                allow="autoplay; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
            </iframe>
        </div>
    </div>

    <!-- Image Modal -->
    <div class="image-modal" id="image-modal">
        <div class="modal-content">
            <span class="modal-close" id="image-modal-close-btn">&times;</span>
            <img id="modal-image-container" src="" alt="Enlarged Project Image">
            <div class="modal-image-title"></div>
            <button class="carousel-nav-btn prev" id="image-modal-prev">&lt;</button>
            <button class="carousel-nav-btn next" id="image-modal-next">&gt;</button>
        </div>
    </div>


    <!-- YouTube Iframe API Script -->
    <script src="https://www.youtube.com/iframe_api"></script>

    <!-- Custom JavaScript for scroll control, dynamic highlighting, videos, and carousel -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // =============================================================
            // 1. Intersection Observer Logic for Nav Highlighting
            // =============================================================
            
            // Include all main sections and subsections we want to track
            const sections = document.querySelectorAll(
                '#about, #education, #experience, #achievements, #contact, #robotics-projects, #industrial-automation, #python-programs, #mechanical-design, #others'
            );
            const navLinks = document.querySelectorAll('.nav-pane a');

            // Find the main section link (e.g., 'Projects') given a sub-section link (e.g., 'Robotics')
            function getParentLink(linkElement) {
                let parentUl = linkElement.closest('ul');
                if (parentUl && parentUl.classList.contains('nested-links')) {
                    let parentLi = parentUl.closest('li');
                    return parentLi ? parentLi.querySelector('a') : null;
                }
                return null;
            }

            const observerOptions = {
                root: null, // Viewport (should be fine for content scroll)
                rootMargin: '0px',
                // Threshold set to 30% visibility to mark it as active
                threshold: 0.3
            };

            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    const id = entry.target.getAttribute('id');
                    const correspondingLink = document.querySelector(`.nav-pane a[href="#${id}"]`); 
                    
                    if (correspondingLink) {
                        if (entry.isIntersecting) {
                            // 1. Remove active class from all links
                            navLinks.forEach(link => link.classList.remove('active-nav'));
                            
                            // 2. Add active class to the currently intersecting link
                            correspondingLink.classList.add('active-nav');
                            
                            // 3. If it's a nested link, also activate its parent link (e.g., if #robotics-projects is active, #projects should be too)
                            let parentLink = getParentLink(correspondingLink);
                            if (parentLink) {
                                parentLink.classList.add('active-nav');
                            }
                        }
                    } 
                    // Special case: If #education is intersecting, make sure #about is still active (it should be, since #education is nested in #about)
                    if (id === 'education' && entry.isIntersecting) {
                         const aboutLink = document.querySelector('.nav-pane a[href="#about"]');
                         if (aboutLink) {
                            // Ensure 'About Me' is active when scrolling through the embedded Education section
                            navLinks.forEach(link => link.classList.remove('active-nav'));
                            aboutLink.classList.add('active-nav');
                         }
                    }
                });
            }, observerOptions);

            sections.forEach(section => {
                observer.observe(section);
            });
            
            // =============================================================
            // 2. Image Carousel and Modal functionality
            // =============================================================

            const carousels = document.querySelectorAll('.image-carousel');
            const imageModal = document.getElementById('image-modal');
            const modalImage = document.getElementById('modal-image-container');
            const modalTitle = imageModal.querySelector('.modal-image-title');
            const imageModalPrevBtn = document.getElementById('image-modal-prev');
            const imageModalNextBtn = document.getElementById('image-modal-next');
            const imageModalCloseBtn = document.getElementById('image-modal-close-btn');

            let currentImageIndex = 0;
            let currentImages = []; // Stores the array of image elements from the active carousel

            carousels.forEach(carousel => {
                const imagesContainer = carousel.querySelector('.carousel-images');
                const slides = imagesContainer.querySelectorAll('.image-slide');
                const prevBtn = carousel.querySelector('.prev');
                const nextBtn = carousel.querySelector('.next');
                const viewBtn = carousel.querySelector('span.carousel-view-button'); 
                let currentIndex = 0;
                let intervalId;

                function showImage(index) {
                    imagesContainer.style.transform = `translateX(${-index * 100}%)`;
                    currentIndex = index;
                }

                function nextImage() {
                    currentIndex = (currentIndex + 1) % slides.length;
                    showImage(currentIndex);
                }
                
                function prevImage() {
                    currentIndex = (currentIndex - 1 + slides.length) % slides.length;
                    showImage(currentIndex);
                }

                // Function to start the interval
                function startAutoPlay() {
                    // Clear existing interval before starting a new one
                    if (intervalId) clearInterval(intervalId);
                    intervalId = setInterval(nextImage, 3000);
                }

                // Function to stop the interval
                function stopAutoPlay() {
                    if (intervalId) {
                        clearInterval(intervalId);
                        intervalId = null;
                    }
                }

                startAutoPlay(); // Start on load

                prevBtn.addEventListener('click', prevImage);
                nextBtn.addEventListener('click', nextImage);

                // Pause auto-play on hover
                carousel.addEventListener('mouseenter', stopAutoPlay);
                carousel.addEventListener('mouseleave', () => {
                    // Only restart if the modal isn't active
                    if (!imageModal.classList.contains('modal-active') && intervalId === null) {
                        startAutoPlay();
                    }
                });


                viewBtn.addEventListener('click', () => {
                    const currentCarousel = document.getElementById(carousel.id);
                    // Update currentImages array for modal navigation
                    currentImages = Array.from(currentCarousel.querySelectorAll('.image-slide img'));
                    
                    // Find the current index of the image visible in the carousel to open the modal on that image
                    const transformStyle = imagesContainer.style.transform;
                    const match = transformStyle.match(/translateX\((-\d+)%\)/);
                    if (match && currentImages.length > 0) {
                        const translateXValue = parseInt(match[1]);
                        currentImageIndex = Math.abs(translateXValue / 100) % currentImages.length;
                    } else {
                        currentImageIndex = 0;
                    }

                    modalImage.src = currentImages[currentImageIndex].src;
                    modalTitle.textContent = currentImages[currentImageIndex].dataset.title;

                    imageModal.classList.add('modal-active');
                    stopAutoPlay(); // Stop when modal is active
                });
            });

            // Function to update modal content when navigating
            function updateModalContent() {
                if (currentImages.length > 0) {
                    modalImage.src = currentImages[currentImageIndex].src;
                    modalTitle.textContent = currentImages[currentImageIndex].dataset.title;
                }
            }

            // Image Modal Navigation
            imageModalPrevBtn.addEventListener('click', () => {
                if (currentImages.length > 0) {
                    currentImageIndex = (currentImageIndex - 1 + currentImages.length) % currentImages.length;
                    updateModalContent();
                }
            });

            imageModalNextBtn.addEventListener('click', () => {
                if (currentImages.length > 0) {
                    currentImageIndex = (currentImageIndex + 1) % currentImages.length;
                    updateModalContent();
                }
            });

            // Close Image Modal (Removed complex restart logic)
            imageModalCloseBtn.addEventListener('click', () => {
                imageModal.classList.remove('modal-active');
                modalTitle.textContent = ""; // Clear title when closing
                // Autoplay will restart automatically if the mouse is hovering over the carousel after closure.
            });

            // Close video and image modals on click outside
            const videoModal = document.getElementById('video-modal');
            const videoModalVideoContainer = document.getElementById('modal-video-container');

            window.addEventListener('click', (event) => {
                if (event.target === videoModal) {
                    videoModal.classList.remove('modal-active');
                    videoModalVideoContainer.src = ""; // Stops the video
                }
                if (event.target === imageModal) {
                    imageModal.classList.remove('modal-active');
                    modalTitle.textContent = "";
                }
            });
        });
        
        // =============================================================
        // 3. YouTube API Logic (MUST be outside DOMContentLoaded)
        // (Modified to target existing IFRAMES)
        // =============================================================
        
        // Global Map to track players, their instance, and their ready state
        const videoPlayers = {};
        let videoObserver;

        // This function is automatically called by the YouTube Iframe API when it's ready
        function onYouTubeIframeAPIReady() {
            
            const contentScroller = document.querySelector('.content');

            if (!contentScroller) {
                console.error("CRITICAL ERROR: Could not find the '.content' scrollable element. Autoplay will not work.");
                return;
            }
            
            console.log("Scrollable content area found. Initializing Video Intersection Observer.");

            // Intersection Observer setup for muted autoplay on scroll (50% visibility)
            const videoObserverOptions = {
                root: contentScroller, // IMPORTANT: Use the custom scroll container as the root
                rootMargin: '0px',
                // Threshold set to 0.8 (80% visibility) as requested
                threshold: 0.8
            };

            videoObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    // Find the IFRAME element inside the observed container, which holds the ID and data-videoid
                    const containerElement = entry.target;
                    // Changed query selector to target the iframe element
                    const iframeElement = containerElement.querySelector('iframe[data-videoid]'); 
                    
                    if (!iframeElement) return;

                    // Use the iframe's ID to look up the player
                    const videoId = iframeElement.id; 
                    const playerInfo = videoPlayers[videoId]; 

                    // Only attempt control if the player exists AND is ready
                    if (playerInfo && playerInfo.isReady) {
                        const player = playerInfo.player;
                        
                        // Check if the intersection ratio meets the 50% threshold
                        if (entry.isIntersecting && entry.intersectionRatio >= 0.5) {
                            // Video is 50% or more visible. Try to play and restart.
                            if (player.getPlayerState() !== YT.PlayerState.PLAYING) {
                                console.log(`[PLAY] ${videoId} (Ratio: ${entry.intersectionRatio.toFixed(2)}) - Restarting video.`);
                                // Force seek to start (0 seconds) before playing, fulfilling the "play from start" requirement.
                                player.seekTo(0, true); 
                                player.playVideo();
                            }
                        } else {
                            // Video is less than 50% visible. Pause it.
                            if (player.getPlayerState() === YT.PlayerState.PLAYING) {
                                console.log(`[PAUSE] ${videoId} (Ratio: ${entry.intersectionRatio.toFixed(2)})`);
                                player.pauseVideo();
                            }
                        }
                    }
                });
            }, videoObserverOptions);

            // Handler that runs once an individual player is fully initialized and ready to receive commands
            function onPlayerReady(event) {
                const iframe = event.target.getIframe();
                const containerId = iframe.id; // The ID is now directly on the iframe
                
                // Aggressively mute the player upon ready (essential for programmatic autoplay)
                event.target.mute(); 
                
                // Update the global map: the player is ready
                if (containerId && videoPlayers[containerId]) {
                     videoPlayers[containerId].isReady = true; 
                     console.log(`Player ready and muted: ${containerId}`);
                }
            }

            // Function to set up a video player, modal functionality, and observer
            function setupVideoPlayer(iframeElementId) {
                // IMPORTANT: We now look up the IFRAME element by its ID
                const iframeElement = document.getElementById(iframeElementId);
                if (!iframeElement) return;

                const videoId = iframeElement.dataset.videoid;
                const containerElement = iframeElement.closest('.project-video'); // The element to OBSERVE
                if (!containerElement) return;

                const viewButton = containerElement.querySelector('.video-view-button');
                const modal = document.getElementById('video-modal');
                const modalVideoContainer = document.getElementById('modal-video-container');

                // 1. Create the player instance (targets the existing iframe by ID)
                const playerInstance = new YT.Player(iframeElementId, {
                    videoId: videoId,
                    playerVars: {
                        autoplay: 0,
                        mute: 1,
                        loop: 1,
                        playlist: videoId,
                        rel: 0,
                        modestbranding: 1,
                        controls: 1,
                        enablejsapi: 1
                    },
                    events: {
                        'onReady': onPlayerReady
                    }
                });

                // 2. Store the player instance and initialize the ready flag
                videoPlayers[iframeElementId] = {
                    player: playerInstance,
                    isReady: false
                };

                // 3. Start observing the .project-video container itself (not its parent)
                videoObserver.observe(containerElement);

                // Modal functionality
                viewButton.addEventListener('click', () => {
                    modal.classList.add('modal-active');

                    // Stop in-page video using the stored player object
                    const playerInfo = videoPlayers[iframeElementId];
                    if (playerInfo && playerInfo.isReady) {
                        playerInfo.player.pauseVideo();
                    }

                    // Load the modal video MUTED (mute=1) with autoplay=1, fulfilling the requirement.
                    console.log(`Loading modal video: ${videoId}, muted autoplay`);
                    modalVideoContainer.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1&rel=0&modestbranding=1&controls=1`;
                });
            }

            // Set up players for ALL project videos:
            setupVideoPlayer('amigo-exp-video');
            setupVideoPlayer('energypac-exp-video');
            setupVideoPlayer('flap-project-video');
            setupVideoPlayer('erc-video');
            setupVideoPlayer('data-science-video');
            setupVideoPlayer('ml-video');

            // Close modal button logic
            const videoModal = document.getElementById('video-modal');
            const videoCloseButton = document.getElementById('modal-close-btn');
            const videoModalVideoContainer = document.getElementById('modal-video-container');

            videoCloseButton.addEventListener('click', () => {
                videoModal.classList.remove('modal-active');
                videoModalVideoContainer.src = ""; // Stops the video cleanly
                console.log("Modal video stopped and closed.");
            });
        }
    </script>

</body>
</html>
